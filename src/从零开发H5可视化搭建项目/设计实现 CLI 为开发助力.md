
# è®¾è®¡å®ç° CLI ä¸ºå¼€å‘åŠ©åŠ›
---

# è®¾è®¡å®ç° CLI ä¸ºå¼€å‘åŠ©åŠ›

å‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†æ¨¡æ¿å’Œç»„ä»¶çš„è®¾è®¡æ–¹å¼ï¼Œæˆ‘ä»¬åŸºäºè¿™ç§æ¨¡å¼å·²ç»ç®€å•çš„æŠŠè¡¨å•é¡µé¢æ¨¡æ¿å¼€å‘å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é¢ä¸´çš„é—®é¢˜å°±æ˜¯ï¼š

1.  æˆ‘ä»¬åªå¼€å‘äº†ä¸€å¥—æ¨¡æ¿ï¼Œå¦‚ä½•ä¿è¯åç»­æ¨¡æ¿çš„å¼€å‘
2.  æˆ‘ä»¬åˆ¶å®šçš„æ¨¡æ¿ã€ç»„ä»¶å¼€å‘è§„èŒƒï¼Œå¦‚ä½•ä¿è¯ä¸åŒå¼€å‘è€…ä¹‹é—´çš„ç»Ÿä¸€
3.  æ¨¡æ¿å¼€å‘å®Œæ¯•åï¼Œå¦‚ä½•ç»Ÿä¸€è¿›è¡Œéƒ¨ç½²å’Œå‘å¸ƒ
4.  æ¨¡æ¿çš„ç»„ä»¶éœ€è¦ä»¥ç¼©ç•¥å›¾çš„æ–¹å¼å±•ç¤ºåœ¨ç¼–è¾‘å™¨ç»„ä»¶é€‰æ‹©å–ï¼Œå¦‚ä½•ç”Ÿæˆç¼©ç•¥å›¾

è¿™äº›é—®é¢˜çš„æœ¬è´¨éƒ½æ˜¯**å¦‚ä½•ä¿éšœç»„ä»¶å’Œæ¨¡æ¿çš„å¤ç”¨æ€§å’Œæ‰©å±•æ€§**æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾è®¡ä¸€å¥— `CLI(Command Line Interface)` æ¶æ„æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚`SPA` åº”ç”¨ä¸­å¸¸ç”¨çš„å¦‚ `vue-cli`, `react-create-app`, `node.js`å¼€å‘æ­å»º `express-generator`ï¼Œ`easy-mock` è„šæ‰‹æ¶æœåŠ¡ `mock-cli`ï¼Œè¿™äº›è„šæ‰‹æ¶çš„ç›®çš„æ—¨åœ¨å‡å°‘ä½çº§é‡å¤åŠ³åŠ¨ï¼Œä¸“æ³¨ä¸šåŠ¡æé«˜å¼€å‘æ•ˆç‡ï¼Œè§„èŒƒ `develop workflow`ã€‚

æˆ‘ä»¬æŒ‰ç…§å½“å‰çš„é—®é¢˜å¯ä»¥å¯¹ `CLI` çš„æ ¸å¿ƒåŠŸèƒ½è®¾è®¡æˆä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2400132f80f46e39147ce989d8fcbb3~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬è¿™æ¬¡ç¼–å†™çš„è„šæ‰‹æ¶\(coco-cli\)å…·å¤‡ä»¥ä¸‹èƒ½åŠ›:

```shell
$ coco create project-name // æ ¹æ®è¿œç¨‹æ¨¡æ¿ï¼Œåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®(è¿œç¨‹æ¨¡æ¿å¯é…ç½®)
$ coco release // å‘å¸ƒæ¨¡æ¿
$ coco init // åˆå§‹åŒ–é…ç½®ä¿¡æ¯
```

## å¦‚ä½•å¼€å§‹

#### 1\. åˆå§‹åŒ– cli

æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»å¤´å¼€å§‹ä»‹ç»å¦‚ä½•å¼€å§‹åˆ›å»ºä¸€ä¸ª `coco-cli` æ¥é¢å‘æ¨¡æ¿æˆ–è€…ç»„ä»¶å¼€å‘è€…ï¼Œå‡å°‘é‡å¤åŠ³åŠ¨ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚å¼€å§‹åŠ¨æ‰‹ï¼š

```shell
$ mkdir coco-cli && cd coco-cli
$ npm init -y  // åˆå§‹åŒ– package.json
```

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªå‘½ä»¤å…¥å£ï¼ŒæŒ‡å‘å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬è¿è¡Œ `coco` å‘½ä»¤æ—¶ï¼Œéœ€è¦å¯¹åº”ä¸€ä¸ª `node` æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `package.json` æ–‡ä»¶ä¸­æŒ‡æ˜ `bin` æ¥é…ç½®å…¥å£ï¼š

```json
{
  "name": "coco-cli",
  "version": "1.0.0",
  "description": "coco cli",
  "bin": {
    "coco": "./bin/index.js"
  },
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

å¯¹åº”çš„ `./bin/index.js` æ–‡ä»¶ä¸­éœ€è¦æ·»åŠ ä¸€ä¸‹è¿™æ ·çš„å£°æ˜ï¼š

```js
#!/usr/bin/env node
```

è‹¥æ˜¯æœ‰ä½¿ç”¨è¿‡ `Linux` æˆ–è€… `Unix` çš„å‰ç«¯å¼€å‘è€…ï¼Œå¯¹äº `Shebang` åº”è¯¥ä¸é™Œç”Ÿï¼Œå®ƒæ˜¯ä¸€ä¸ªç¬¦å·çš„åç§°ï¼Œ`#ï¼`ã€‚è¿™ä¸ªç¬¦å·é€šå¸¸åœ¨Unixç³»ç»Ÿçš„åŸºæœ¬ä¸­ç¬¬ä¸€è¡Œå¼€å¤´ä¸­å‡ºç°ï¼Œç”¨äºæŒ‡æ˜è¿™ä¸ªè„šæœ¬æ–‡ä»¶çš„è§£é‡Šç¨‹åºã€‚æ‰€ä»¥å¢åŠ è¿™ä¸€è¡Œæ˜¯ä¸ºäº†æŒ‡å®šç”¨ `node` æ‰§è¡Œè„šæœ¬æ–‡ä»¶ã€‚`/usr/bin/env` å°±æ˜¯å‘Šè¯‰ç³»ç»Ÿå¯ä»¥åœ¨ `PATH` ç›®å½•ä¸­æŸ¥æ‰¾ã€‚ æ‰€ä»¥é…ç½® `#!/usr/bin/env node`, å°±æ˜¯è§£å†³äº†ä¸åŒçš„ç”¨æˆ· `node` è·¯å¾„ä¸åŒçš„é—®é¢˜ï¼Œå¯ä»¥è®©ç³»ç»ŸåŠ¨æ€çš„å»æŸ¥æ‰¾ `node` æ¥æ‰§è¡Œä½ çš„è„šæœ¬æ–‡ä»¶ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„è„šæ‰‹æ¶ï¼Œå¯ä»¥é€šè¿‡åœ¨å½“å‰ç›®å½•æ‰§è¡Œ `npm link` æ¥å¢åŠ ä¸€ä¸ª `è½¯è¿æ¥`ï¼š

```shell
$ npm link
// /usr/local/bin/coco -> /usr/local/lib/node_modules/coco-cli/bin/index.js
// /usr/local/lib/node_modules/coco-cli -> /Users/muwoo/coco/coco-cli
```

å†æ‰“å¼€æˆ‘ä»¬çš„ `coco-template`ï¼Œåœ¨ `script` ä¸­å¢åŠ ä¸€è¡Œå‘½ä»¤ï¼š

```json
{
  "coco": "coco"
}
```

ä¸€ä¸ªç®€å•çš„ `cli` å·²ç»å®Œæˆã€‚

#### 2\. å¸¸ç”¨æ¨¡å—

å¼€å‘å‰å…ˆä»‹ç»ä»¥ä¸‹å‡ ä¸ªå¸¸è§çš„åº“:

- [chalk](https://github.com/chalk/chalk#readme) å¯ä»¥åœ¨ç»ˆç«¯æ˜¾ç¤ºé¢œè‰²
- [commander](https://github.com/tj/commander.js) æä¾›äº†å‘½ä»¤è¡Œè¾“å…¥å’Œå‚æ•°è§£æï¼Œç®€åŒ–å‘½ä»¤è¡Œå¼€å‘
- [inquirer](https://github.com/SBoudrias/Inquirer.js) äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥æ”¶é›†ç”¨æˆ·å¡«å…¥è¡¨å•
- [ora](https://github.com/sindresorhus/ora) ç»ˆç«¯åŠ è½½åŠ¨ç”»æ•ˆæœï¼Œå¢åŠ è¶£å‘³æ€§
- [shelljs](https://github.com/shelljs/shelljs) é€šè¿‡åœ¨ä»£ç ä¸­ç¼–å†™shellå‘½ä»¤å®ç°åŠŸèƒ½
- [puppeteer](https://github.com/puppeteer/puppeteer) ä¸»è¦ç”¨æ¥å¯åŠ¨æ— å¤´æµè§ˆå™¨ç”Ÿæˆç½‘ç«™ç¼©ç•¥å›¾
- [download-git-repo](https://www.npmjs.com/package/download-git-repo): ç”¨æ¥ä¸‹è½½è¿œç¨‹æ¨¡æ¿

è¿™äº›æ¨¡å—æ¥å¼€å‘æˆ‘ä»¬çš„ `coco-cli` è¶³ä»¥ï¼Œæ­¤å¤–å¦‚æœä½ å¯¹è¿™äº›æ¨¡å—æœ‰æ›´å¤šå…¶ä»–çš„éœ€æ±‚ï¼Œè¿™é‡Œæœ‰æ›´[å¤šçš„](https://stackify.com/top-command-line-tools/)æ¨¡å—å¯ä»¥æä¾›é€‰æ‹©ã€‚

#### 3\. create æ¨¡æ¿ã€ç»„ä»¶

æˆ‘ä»¬æ¥ä¸‹æ¥å…ˆå®ç°ä¸€ä¸ªåˆ›å»ºæ¨¡æ¿çš„åŠŸèƒ½ï¼Œç”¨äºåˆå§‹åŒ–æ¨¡æ¿è„šæ‰‹æ¶ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ï¼š

```shell
$ coco create coco-template-test
```

è¿™æ ·çš„å‘½ä»¤æ¥å®ç°ä¸€ä¸ª `coco-template-test` æ¨¡æ¿çš„åˆ›å»ºã€‚è¿™é‡Œå°±éœ€è¦ç”¨åˆ° `commander` æ¥è¿›è¡Œå‘½ä»¤è¡Œè¾“å…¥å‚æ•°è§£æï¼š

```js
program
  .command('create [template]')
  .description('generator a new template')
  .action(function(template){
    generate(template);
  });
```

ç„¶åæˆ‘ä»¬å†å®šä¹‰ `generate` çš„å®ç°ï¼š

```js
// è·å–æ¨¡æ¿ä¿¡æ¯
async function getTemplateInfo() {
  return await inquirer.prompt([
    {
      name: 'author',
      type: 'input',
      message: 'ä½œè€…',
      default: ''
    },
    {
      name: 'templateName',
      type: 'input',
      message: 'ä½ è¿˜éœ€è¦ç»™ä½ çš„æ¨¡ç‰ˆèµ·ä¸ªä¸­æ–‡å',
      default: ''
    }
  ]);
}
// ç”Ÿæˆå™¨
async function generate(name){
  // äº¤äº’å¼é—®ç­”ï¼Œç”Ÿæˆæ¨¡æ¿é…ç½®ä¿¡æ¯
  const config = await getTemplateInfo();
  // ç”Ÿæˆé¡¹ç›®çš„ç›®å½•
  const targetDir = path.join(targetRootPath, name);
  if(fs.existsSync(targetDir)){

    // å¦‚æœå·²å­˜åœ¨æ”¹æ¨¡å—ï¼Œæé—®å¼€å‘è€…æ˜¯å¦è¦†ç›–è¯¥æ¨¡å—
    inquirer.prompt([
      {
        name:'template-overwrite',
        type:'confirm',
        message:`æ¨¡æ¿ ${name} å·²ç»å­˜åœ¨, æ˜¯å¦ç¡®è®¤è¦†ç›–?`,
        validate: function(input){
          if(input.lowerCase !== 'y' && input.lowerCase !== 'n' ){
            return 'Please input y/n !'
          }
          else{
            return true;
          }
        }
      }
    ])
      .then(answers=>{
        console.log('answers',answers);

        // å¦‚æœç¡®å®šè¦†ç›–
        if(answers['template-overwrite']){
          // åˆ é™¤æ–‡ä»¶å¤¹
          deleteFolderRecursive(targetDir);
          console.log(chalk.yellow(`template already existed , removing!`));

          //åˆ›å»ºæ–°æ¨¡å—æ–‡ä»¶å¤¹
          fs.mkdirSync(targetDir);
          copyTemplates(name, config);
          console.log(chalk.green(`ç”Ÿæˆæ¨¡æ¿ "${name}" å®Œæˆ!`));
        }
      })
      .catch(err=>{
        console.log(chalk.red(err));
      })
  }
  else{
    //åˆ›å»ºæ–°æ¨¡å—æ–‡ä»¶å¤¹
    fs.mkdirSync(targetDir);
    copyTemplates(name, config);
    console.log(chalk.green(`ç”Ÿæˆæ¨¡æ¿ "${name}" å®Œæˆ!`));
  }
}
```

åˆ©ç”¨ `download-git-repo` æ¥ä¸‹è½½è¿œç¨‹æ¨¡æ¿ï¼š

```js
const download = require('download-git-repo');

async function downLoadTemplate(repository, projectName, clone) {
  await new Promise((resolve, reject) => {
    download(
      repository,
      projectName,
      {
        clone
      },
      (err) => {
        if (err) return reject(err);
        resolve();
      }
    );
  });
}
```

åœ¨ç”¨æˆ·è¾“å…¥ä¹‹åï¼Œå¼€å§‹ä¸‹è½½æ¨¡æ¿ï¼Œè¿™æ—¶å€™ä½¿ç”¨ `ora` æ¥æç¤ºç”¨æˆ·æ­£åœ¨ä¸‹è½½æ¨¡æ¿ï¼Œä¸‹è½½ç»“æŸä¹‹åï¼Œä¹Ÿç»™å‡ºæç¤ºã€‚

```js
const ora = require('ora');

const spinner = ora('ğŸ—ƒ å¼€å§‹ä¸‹è½½æ¨¡ç‰ˆ...')
spinner.start();
await downLoadTemplate(`direct:git@github.com:coco-h5/coco-template.git`, name, true);
spinner.succeed('ğŸ‰ æ¨¡ç‰ˆä¸‹è½½å®Œæˆ');
```

åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å·²ç»å¯ä»¥é€šè¿‡ `coco create coco-template-test` æ¥å®Œæˆæ¨¡æ¿çš„åˆ›å»ºå·¥ä½œï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37ffd7ab39354f50b6cf47dff08274d9~tplv-k3u1fbpfcp-watermark.image)

ç»„ä»¶æ¨¡æ¿åˆ›å»ºåŒç†ï¼Œè¿™é‡Œå°±ä¸åœ¨é‡å¤è´´ä»£ç äº†ã€‚

#### 4\. publish æ¨¡æ¿ã€ç»„ä»¶

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå®šä¹‰å¥½éœ€è¦å¼€å‘çš„å‘½ä»¤ï¼š

```js
program
  .command('release')
  .description('å‘å¸ƒæ¨¡æ¿')
  .action(function(){
    release();
  });
```

å½“æˆ‘ä»¬çš„æ¨¡æ¿å¼€å‘å®Œæ¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†æ¨¡æ¿æäº¤åˆ°ç¼–è¾‘å™¨åå°ç®¡ç†é¡µä¸­ï¼Œç”¨äºè¿è¥é€‰æ‹©æˆ‘ä»¬çš„æ¨¡æ¿ã€‚è¿™é‡Œå…¶å®ä¹Ÿå°±æ˜¯å¹²2ä»¶äº‹ï¼Œç¬¬ä¸€æ­¥å…ˆç”Ÿæˆå¼€å‘å¥½çš„æ¨¡æ¿çš„ç¼©ç•¥å›¾ï¼Œç¬¬äºŒæ­¥å°±æ˜¯å°†æˆ‘ä»¬çš„ `coco.config.js` æ–‡ä»¶æäº¤åˆ° `server` ç«¯ã€‚è¿™æ ·æˆ‘ä»¬çš„ç¼–è¾‘åå°å°±å¯ä»¥é€šè¿‡ `query` æ¥æŸ¥è¯¢ `server` è·å–æ¨¡æ¿ä¿¡æ¯ï¼š

```js
async function releaseTemplate({
  snapshot,
  nameSpace,
  context,
  webDomian,
  name,
  templateName,
  author,
  baseApi,
  gitUrl
}) {
  if (!snapshot) {
    // é€šè¿‡ pupeteer åˆ›å»ºç¼©ç•¥å›¾
    snapshot = await createSnapshot({ webDomian, nameSpace, context });
  }
  try {
    // å‘å¸ƒæ•°æ®
    axios
      .post(`${baseApi}/template/update`, {
        name,
        templateName,
        author,
        snapshot,
        gitUrl,
        version: resolveJson(context).version
      })
      .then((res) => {
        log.success(`ğŸ‰ ğŸ‰ å‘å¸ƒæˆåŠŸï¼`);
      })
      .catch((err) => {
        console.log(err);
      });
  } catch (error) {
    console.log(error);
  }
}
```

å¯¹äºç»„ä»¶å‘å¸ƒï¼Œåˆ™ç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œç»„ä»¶æ˜¯åœ¨ `packages` ç›®å½•ä¸‹æŒ‰ç›®å½•ç»´åº¦å­˜å‚¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦éå†ç»„ä»¶ç›®å½•ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”ç»„ä»¶é…ç½®å’Œç¼©ç•¥å›¾è¿›è¡Œä¸Šä¼ ï¼š

```js
async function releaseComponents({ context, webDomian, nameSpace, gitUrl, name, baseApi }) {
  const sh = new Shell();
  const config = {
    name,
    gitUrl,
    description: 'test component',
    config: []
  };
  // æŸ¥æ‰¾ packages ä¸‹æ‰€æœ‰æ–‡ä»¶
  sh.shell.ls('packages').forEach((file) => {
    if (file.indexOf('.') === -1) {
      const json = resolveJson(`${context}/packages/${file}`);
      if (!json.name || !json.version || !json.description) {
        log.error(`${context}/packages/${file} å­˜åœ¨ä¸åˆè§„èŒƒçš„package.json, å¿…é¡»åŒ…å«nameã€versionã€descriptionå±æ€§`);
        process.exit(0);
      }
      // ç»„ä»¶å‘å¸ƒæŒ‰ç…§ ç»„ä»¶å+ç»„ä»¶ç‰ˆæœ¬ çš„å½¢å¼è¿›è¡Œå‘å¸ƒï¼Œæ¯”å¦‚ coco-global-banner.0.0.1.umd.js
      const name = `${json.name}.${json.version}`;
      config.config.push({
        dir: file,
        snapshot: '',
        name,
        description: json.description,
        js: `${webDomian}/${nameSpace}/${name}.umd.js`,
        css: `${webDomian}/${nameSpace}/${name}.css`
      });
    }
  });
  try {
    // todo ç”Ÿæˆç¼©ç•¥å›¾ & ç»„ä»¶ä¸Šä¼ 
  } catch (e) {
    log.error('ä¸Šä¼ å¤±è´¥' + e);
  }
}

```

#### 5\. coco init åˆå§‹åŒ–é…ç½®

åˆå§‹åŒ–é…ç½®å·¥ä½œæ˜¯ä¸ºäº†å¯¹ä¸€äº›ä¸æ˜¯ç”¨ `coco create` åˆ›å»ºçš„é¡¹ç›®ï¼Œè¿›è¡Œé…ç½®æ–‡ä»¶åˆå§‹åŒ–çš„å·¥ä½œã€‚æŒ‰ç…§ä¸Šé¢çš„ä»‹ç»ï¼Œç¬¬ä¸€æ­¥å…ˆæ¥å—å‘½ä»¤çš„è¾“å…¥ï¼š

```js
program
  .command('init')
  .description('åˆå§‹åŒ– coco config é…ç½®æ–‡ä»¶')
  .action(initial);
```

ç„¶åå®šä¹‰ `initial` åŠŸèƒ½çš„å®ç°ï¼Œé€šè¿‡æ£€æµ‹å½“å‰ç›®å½•ä¸‹æ˜¯å¦å·²ç»å­˜åœ¨ `coco.config.js` æ¥ç»™ç”¨æˆ·è¿›è¡Œæ˜¯å¦è¦†ç›–çš„æç¤ºé€‰æ‹©ï¼š

```js
module.exports = function(){
  // é…ç½®æ–‡ä»¶å¦‚æœå­˜åœ¨åˆ™æç¤ºæ˜¯å¦è¦†ç›–
  if(fs.existsSync(path.resolve('coco.config.js'))){
    // è¿ç»­æé—®
    inquirer.prompt([
      {
        name:'init-confirm',
        type:'confirm',
        message:`coco.config.js å·²ç»å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–?`,
        validate: function(input){
          if(input.lowerCase !== 'y' && input.lowerCase !== 'n' ){
            return 'Please input y/n !'
          }
          else{
            return true;
          }
        }
      }
    ])
      .then(answers=>{
        if(answers['init-confirm']){
          copyCocoConfigJS();
        }
        else{
          process.exit(0);
        }
      })
      .catch(err=>{
        console.log(chalk.red(err));
      })
  }
  else{
    copyCocoConfigJS();
  }
};
```

å¦‚æœé€‰æ‹©ç¡®å®šç”Ÿæˆ `coco.config.js` æœ€ååªéœ€è¦å°†æˆ‘ä»¬å®šä¹‰å¥½çš„æ¨¡æ¿æ–‡ä»¶ï¼Œ`copy` åˆ°å½“å‰ç›®å½•å³å¯:

```js
const figlet = require('figlet');

function copyCocoConfigJS(){
  figlet('coco cli', function(err, data) {
    if(err){
      console.log(chalk.red('Some thing about figlet is wrong!'));
    }
    console.log(chalk.yellow(data));
    let targetFilePath = path.resolve('coco.config.js');
    let templatePath = path.join(__dirname,'../tpl/coco.config.js');
    let contents = fs.readFileSync(templatePath,'utf8');
    fs.writeFileSync(targetFilePath,contents,'utf8');
    console.log(chalk.green('åˆå§‹åŒ–é…ç½®æˆåŠŸ \n'));
    process.exit(0);
  });
}
```

æœ€åæ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„ `cli` ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```bash
coco-cli
â”œâ”€package.json
â”œâ”€tpl
|  â”œâ”€coco.config.js
|  â””getConfig.js
â”œâ”€lib
â”œâ”€command
|    â”œâ”€generator.js
|    â”œâ”€release.js
|    â””initial.js
â”œâ”€bin
|  â””index.js
```

æ–‡ä»¶ç»“æ„è¦åˆ’åˆ†åˆç†ï¼Œ`index.js` æ˜¯ä¸»å…¥å£æ–‡ä»¶ï¼Œ `commands` ä¸“é—¨æ”¾ä¸»è¦çš„å‘½ä»¤åŠŸèƒ½é€»è¾‘ï¼Œæ ¹æ®å‘½ä»¤æ¨¡å—åˆ’åˆ†ï¼Œæ¯”è¾ƒç»†çš„åŠŸèƒ½å®ç°å¯ä»¥æŠ½æˆç»„ä»¶æ”¾åœ¨ `lib` æ–‡ä»¶å¤¹ä¸­ï¼Œå‰©ä½™çš„é…ç½®ï¼Œä»¥åŠæ¨¡æ¿ç­‰æ”¾ `tpl` æ–‡ä»¶å¤¹ä¸­ã€‚

## æ€»ç»“

æœ¬å°èŠ‚ä¸»è¦ä»‹ç»äº† `CLI` çš„å…¥é—¨ä»¥åŠå¦‚ä½•è®¾è®¡ `coco-cli`ï¼Œå¸¸è§çš„ node æ¨¡å—ä»¥åŠç”¨æ³•ã€‚CLI æ˜¯ web å¼€å‘çš„è¾…åŠ©å·¥å…·ï¼Œæ—¨åœ¨æé«˜ web å·¥ä½œæ•ˆç‡ï¼Œå½“ç„¶ç”¨ `CLI` æ¥ä¸ºå¼€å‘ææ•ˆåªæ˜¯å¯æ˜¯åŒ–æ­å»ºä¸­æœ€åŸºç¡€çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åŸºäº `git` æ“ä½œåœ¨æˆ‘ä»¬çš„ç¼–è¾‘åå°è®¾è®¡ä¸€å¥—æ¨¡æ¿ç ”å‘æµç¨‹ï¼Œé€šè¿‡å¯è§†åŒ–çš„æ–¹å¼ç®¡ç†ç ”å‘çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬æ¨¡æ¿çš„å‘å¸ƒã€ç°åº¦ã€å®¡æ‰¹ç­‰ç­‰ä¸€ç³»åˆ—è§„èŒƒåŒ–æµç¨‹ã€‚ä½†æ˜¯è¿™é‡Œå·²ç»æ¶‰åŠåˆ°å‰ç«¯å‘å¸ƒç³»ç»Ÿçš„ç›¸å…³çŸ¥è¯†ã€‚æœ¬å°å†Œä¸å†åšè¿‡å¤šä»‹ç»ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åŠ æˆ‘çš„å¾®ä¿¡ï¼Œæˆ‘ä»¬ä¸€èµ·æ²Ÿé€šäº¤æµï¼Œä¹Ÿå¯ä»¥è‡ªå·±å»å®ç°è¿™æ ·ä¸€å¥—æµç¨‹ï¼Œå…¶å®å¹¶ä¸å¤æ‚ã€‚
    